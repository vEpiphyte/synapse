{
  "sources": [
    [
      "ingest_structured_nested_data.json",
      {
        "open": {
          "encoding": "utf8",
          "format": "json"
        },
        "ingest": {
          "tags": [
            "src.socialnetwork"
          ],
          "forms": [
            [
              "inet:web:acct",
              {
                "template": "{{domain}}/{{user}}",
                "props": {
                  "seen:max": {
                    "var": "last_login"
                  },
                  "signup": {
                    "var": "account_created"
                  }
                }
              }
            ]
          ],
          "vars": [
            [
              "domain",
              {
                "path": "site"
              }
            ],
            [
              "user",
              {
                "path": "user"
              }
            ],
            [
              "account_created",
              {
                "path": "account_created"
              }
            ],
            [
              "last_login",
              {
                "path": "last_login"
              }
            ]
          ],
          "iters": [
            [
              "user_associations/*",
              {
                "forms": [
                  [
                    "inet:web:memb",
                    {
                      "template": "({{domain}}/{{user}},{{domain}}/{{org}})"
                    }
                  ]
                ],
                "vars": [
                  [
                    "org",
                    {
                      "path": 0
                    }
                  ]
                ]
              }
            ],
            [
              "user_friends/*",
              {
                "forms": [
                  [
                    "inet:web:follows",
                    {
                      "template": "({{domain}}/{{user}},{{domain}}/{{friend}})"
                    }
                  ],
                  [
                    "inet:web:follows",
                    {
                      "template": "({{domain}}/{{friend}},{{domain}}/{{user}})"
                    }
                  ]
                ],
                "vars": [
                  [
                    "friend",
                    {
                      "path": 0
                    }
                  ]
                ]
              }
            ],
            [
              "recent_posts/*",
              {
                "forms": [
                  [
                    "inet:web:post",
                    {
                      "template": "(\"{{domain}}/{{user}}\",\"{{text}}\")",
                      "props": {
                        "time": {
                          "var": "time"
                        }
                      }
                    }
                  ]
                ],
                "vars": [
                  [
                    "text",
                    {
                      "path": "text"
                    }
                  ],
                  [
                    "time",
                    {
                      "path": "time"
                    }
                  ]
                ]
              }
            ]
          ]
        }
      }
    ]
  ]
}